#!/usr/bin/env node
import meow from 'meow'
import chalk from 'chalk'
import main from '../lib'

const {input, flags} = meow(`
  Usage: ${chalk.yellow('miku [files]')}

  ${chalk.bold('Example:')}
    $ miku                       ${chalk.dim('# get all *.opai.js|css|html files')}
    $ miku example.js style.css  ${chalk.dim('# custom file')}
`, {
  alias: {
    h: 'help',
    v: 'version'
  }
})

main(input, flags).catch(err => {
  if (err.name === 'MikuError') {
    console.log(chalk.red(`\n  > ${err.message}\n`))
  } else {
    console.log(chalk.red(err.stack))
  }
  process.exit(1)
})
